---
title: 快速开始
description: 5分钟快速上手AILabTools API
---

# 快速开始

本指南将帮助您在5分钟内开始使用AILabTools API进行发型编辑。

## 第一步：获取API密钥

1. 访问 [AILabTools官网](https://www.ailabtools.com/account/signup) 注册账户
2. 登录后在控制台获取您的API密钥
3. 保存好API密钥，后续请求需要使用

<Note>
API密钥是访问所有API的凭证，请妥善保管，不要泄露给他人。
</Note>

## 第二步：准备测试图片

确保您的图片符合以下要求：

- **格式**: PNG、JPG、JPEG
- **大小**: 不超过3MB
- **分辨率**: 200x200px - 1999x1999px
- **内容**: 包含一个清晰的人脸

## 第三步：调用发型编辑API

<Tabs>
<Tab title="JavaScript">
```javascript
// 1. 准备图片数据
const imageFile = document.getElementById('imageInput').files[0];
const reader = new FileReader();

reader.onload = async function() {
  const base64Image = reader.result;
  
  // 2. 调用发型编辑API
  const response = await fetch('https://api.ailabtools.com/v1/hairstyle-editor-pro', {
    method: 'POST',
    headers: {
      'Authorization': 'Bearer YOUR_API_KEY',
      'Content-Type': 'application/json'
    },
    body: JSON.stringify({
      image: base64Image,
      hairstyle: 'short',
      hair_color: 'black'
    })
  });
  
  const result = await response.json();
  console.log('任务ID:', result.result.task_id);
  
  // 3. 轮询获取结果
  const finalResult = await pollTaskResult(result.result.task_id);
  console.log('处理完成:', finalResult);
};

reader.readAsDataURL(imageFile);

// 轮询函数
async function pollTaskResult(taskId) {
  const maxAttempts = 100;
  let attempts = 0;
  
  while (attempts < maxAttempts) {
    const response = await fetch(
      `https://api.ailabtools.com/v1/async-task-results?task_id=${taskId}`,
      {
        headers: {
          'Authorization': 'Bearer YOUR_API_KEY'
        }
      }
    );
    
    const result = await response.json();
    
    if (result.result.status === 'completed') {
      return result.result.result_image;
    } else if (result.result.status === 'failed') {
      throw new Error('任务处理失败');
    }
    
    await new Promise(resolve => setTimeout(resolve, 5000));
    attempts++;
  }
  
  throw new Error('查询超时');
}
```
</Tab>

<Tab title="Python">
```python
import requests
import base64
import time

# 1. 准备图片数据
def encode_image(image_path):
    with open(image_path, "rb") as image_file:
        return base64.b64encode(image_file.read()).decode('utf-8')

# 2. 调用发型编辑API
def edit_hairstyle(api_key, image_path, hairstyle='short', hair_color='black'):
    image_data = encode_image(image_path)
    
    response = requests.post(
        'https://api.ailabtools.com/v1/hairstyle-editor-pro',
        headers={
            'Authorization': f'Bearer {api_key}',
            'Content-Type': 'application/json'
        },
        json={
            'image': f'data:image/jpeg;base64,{image_data}',
            'hairstyle': hairstyle,
            'hair_color': hair_color
        }
    )
    
    result = response.json()
    return result['result']['task_id']

# 3. 轮询获取结果
def poll_task_result(api_key, task_id, max_attempts=100):
    for attempt in range(max_attempts):
        response = requests.get(
            'https://api.ailabtools.com/v1/async-task-results',
            params={'task_id': task_id},
            headers={'Authorization': f'Bearer {api_key}'}
        )
        
        result = response.json()
        
        if result['result']['status'] == 'completed':
            return result['result']['result_image']
        elif result['result']['status'] == 'failed':
            raise Exception('任务处理失败')
        
        time.sleep(5)
    
    raise Exception('查询超时')

# 使用示例
api_key = 'YOUR_API_KEY'
image_path = 'test_image.jpg'

try:
    task_id = edit_hairstyle(api_key, image_path)
    print(f'任务ID: {task_id}')
    
    result_image = poll_task_result(api_key, task_id)
    print('处理完成!')
    
    # 保存结果图片
    with open('result.jpg', 'wb') as f:
        f.write(base64.b64decode(result_image.split(',')[1]))
        
except Exception as e:
    print(f'错误: {e}')
```
</Tab>

<Tab title="cURL">
```bash
# 1. 准备图片数据（Base64编码）
IMAGE_BASE64=$(base64 -i test_image.jpg)

# 2. 调用发型编辑API
curl -X POST https://api.ailabtools.com/v1/hairstyle-editor-pro \
  -H "Authorization: Bearer YOUR_API_KEY" \
  -H "Content-Type: application/json" \
  -d "{
    \"image\": \"data:image/jpeg;base64,$IMAGE_BASE64\",
    \"hairstyle\": \"short\",
    \"hair_color\": \"black\"
  }"

# 3. 轮询获取结果
TASK_ID="task_abcdef123456"
MAX_ATTEMPTS=100

for i in $(seq 1 $MAX_ATTEMPTS); do
  response=$(curl -s -X GET \
    "https://api.ailabtools.com/v1/async-task-results?task_id=$TASK_ID" \
    -H "Authorization: Bearer YOUR_API_KEY")
  
  status=$(echo $response | jq -r '.result.status')
  
  if [ "$status" = "completed" ]; then
    echo "任务完成!"
    echo $response | jq -r '.result.result_image' | base64 -d > result.jpg
    break
  elif [ "$status" = "failed" ]; then
    echo "任务失败"
    exit 1
  fi
  
  echo "等待中... ($i/$MAX_ATTEMPTS)"
  sleep 5
done
```
</Tab>
</Tabs>

## 第四步：查看结果

处理完成后，您将获得编辑后的图片。图片会以Base64格式返回，您可以：

1. 将Base64数据转换为图片文件
2. 直接在网页中显示
3. 保存到本地或云端存储

## 常见问题

<Accordion>
<AccordionItem title="如何处理API错误？">
当API返回错误时，请检查：
- API密钥是否正确
- 图片格式和大小是否符合要求
- 网络连接是否正常
- 请求参数是否正确

详细错误信息请参考 [错误处理指南](/guides/error-handling)。
</AccordionItem>

<AccordionItem title="任务处理需要多长时间？">
通常处理时间在10-30秒之间，具体取决于：
- 图片大小和复杂度
- 服务器负载情况
- 选择的发型和颜色

建议每5秒查询一次任务状态。
</AccordionItem>

<AccordionItem title="支持哪些图片格式？">
目前支持以下格式：
- PNG
- JPG
- JPEG

建议使用JPG格式以获得最佳兼容性。
</AccordionItem>
</Accordion>

## 下一步

现在您已经成功完成了第一次API调用！接下来可以：

- 查看 [API参考](/api/reference) 了解所有可用功能
- 学习 [最佳实践](/guides/best-practices) 优化您的应用
- 查看 [示例代码](/examples) 获取更多灵感

<CTA href="/api/reference">
  查看完整API文档
</CTA>
