---
title: 错误码
description: AILabTools API错误码完整列表
---

# 错误码

本文档列出了AILabTools API可能返回的所有错误码及其解决方案。

## 通用错误码

| 错误码 | 错误类型 | 描述 | 解决方案 |
|--------|----------|------|----------|
| 0 | 成功 | 请求成功处理 | - |
| 1001 | 参数错误 | 请求参数无效或缺失 | 检查请求参数格式和必需字段 |
| 1002 | 图片格式不支持 | 上传的图片格式不在支持范围内 | 使用PNG、JPG或JPEG格式 |
| 1003 | 图片大小超限 | 图片文件大小超过3MB限制 | 压缩图片或使用更小的图片 |
| 1004 | 图片分辨率不符合要求 | 图片分辨率不在200x200px-1999x1999px范围内 | 调整图片分辨率 |
| 1005 | 未检测到人脸 | 图片中没有检测到人脸 | 确保图片包含清晰的人脸 |
| 1006 | 检测到多个人脸 | 图片中检测到多个人脸 | 使用只包含一个人脸的图片 |
| 1007 | 人脸角度过大 | 人脸角度超过30度限制 | 使用正面或接近正面的照片 |
| 1008 | 人脸占比过小 | 人脸在图片中的占比小于10% | 使用人脸占比更大的图片 |

## 认证错误码

| 错误码 | 错误类型 | 描述 | 解决方案 |
|--------|----------|------|----------|
| 2001 | 认证失败 | API密钥无效或已过期 | 检查API密钥是否正确，或重新生成密钥 |
| 2002 | 权限不足 | 当前账户没有访问该API的权限 | 升级账户或联系客服 |
| 2003 | 账户被禁用 | 账户已被禁用 | 联系客服恢复账户 |

## 异步任务错误码

| 错误码 | 错误类型 | 描述 | 解决方案 |
|--------|----------|------|----------|
| 3001 | 任务不存在 | 指定的task_id不存在 | 检查task_id是否正确 |
| 3002 | 任务已过期 | 任务结果已超过24小时有效期 | 重新提交任务 |
| 3003 | 任务处理失败 | 任务处理过程中发生错误 | 检查输入参数，重新提交任务 |
| 3004 | 任务队列已满 | 服务器任务队列已满 | 稍后重试 |

## 速率限制错误码

| 错误码 | 错误类型 | 描述 | 解决方案 |
|--------|----------|------|----------|
| 4001 | 请求频率超限 | 超出每分钟请求次数限制 | 降低请求频率或升级账户 |
| 4002 | 并发请求超限 | 超出同时处理的请求数量限制 | 减少并发请求数量 |

## 服务器错误码

| 错误码 | 错误类型 | 描述 | 解决方案 |
|--------|----------|------|----------|
| 5001 | 服务器内部错误 | 服务器处理请求时发生错误 | 稍后重试或联系客服 |
| 5002 | 服务暂时不可用 | 服务正在维护或升级 | 稍后重试 |
| 5003 | 数据库连接错误 | 数据库连接失败 | 稍后重试 |

## 错误响应格式

所有错误响应都遵循以下格式：

```json
{
  "request_id": "req_123456789",
  "log_id": "log_987654321",
  "error_code": 1001,
  "error_detail": {
    "status_code": 400,
    "code": "INVALID_PARAMETER",
    "code_message": "参数错误",
    "message": "请求参数无效：image字段不能为空"
  }
}
```

## 错误处理最佳实践

### 1. 检查错误码
```javascript
if (response.error_code !== 0) {
  console.error('API错误:', response.error_detail.message);
  // 根据错误码进行相应处理
}
```

### 2. 重试机制
```javascript
async function callAPIWithRetry(apiCall, maxRetries = 3) {
  for (let i = 0; i < maxRetries; i++) {
    try {
      const result = await apiCall();
      if (result.error_code === 0) {
        return result;
      }
      
      // 对于某些错误码，不进行重试
      if ([1001, 1002, 1003, 1004, 1005, 1006, 1007, 1008].includes(result.error_code)) {
        throw new Error(result.error_detail.message);
      }
      
      // 等待后重试
      await new Promise(resolve => setTimeout(resolve, 1000 * (i + 1)));
    } catch (error) {
      if (i === maxRetries - 1) throw error;
    }
  }
}
```

### 3. 用户友好的错误提示
```javascript
function getErrorMessage(errorCode) {
  const errorMessages = {
    1001: '请求参数有误，请检查输入',
    1002: '图片格式不支持，请使用PNG、JPG或JPEG格式',
    1003: '图片太大，请使用小于3MB的图片',
    1004: '图片分辨率不符合要求',
    1005: '未检测到人脸，请确保图片包含清晰的人脸',
    1006: '检测到多个人脸，请使用只包含一个人脸的图片',
    1007: '人脸角度过大，请使用正面照片',
    1008: '人脸太小，请使用人脸占比更大的图片',
    2001: 'API密钥无效，请检查密钥',
    2002: '权限不足，请升级账户',
    3001: '任务不存在',
    3002: '任务已过期，请重新提交',
    3003: '任务处理失败，请重试',
    4001: '请求过于频繁，请稍后重试',
    5001: '服务器错误，请稍后重试'
  };
  
  return errorMessages[errorCode] || '未知错误';
}
```

## 联系支持

如果您遇到未在此文档中列出的错误，或者需要进一步的帮助，请：

1. 记录完整的错误响应（包括request_id和log_id）
2. 描述您执行的操作步骤
3. 联系我们的技术支持团队

<CTA href="mailto:support@ailabtools.com">
  联系技术支持
</CTA>
