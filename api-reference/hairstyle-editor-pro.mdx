---
title: 发型编辑Pro
api: "POST /api/hairstyle-editor-pro"
description: 编辑人像图片中的发型和颜色
openapi: "3.0.0"
servers:
  - url: "https://api.ailabtools.com/v1"
    description: "生产环境"
info:
  title: "AILabTools API"
  version: "1.0.0"
  description: "基于稳定扩散模型的发型编辑Pro功能API"
components:
  securitySchemes:
    BearerAuth:
      type: http
      scheme: bearer
      bearerFormat: JWT
      description: "请输入您的API密钥，格式为 sk-xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"
  schemas:
    HairstyleEditorRequest:
      type: object
      required:
        - image
      properties:
        image:
          type: string
          format: byte
          description: "Base64编码的图片数据，支持PNG、JPG、JPEG格式"
          example: "data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQ..."
        hairstyle:
          type: string
          enum: ["short", "medium", "long", "buzzcut", "pompadour", "quiff", "slicked_back", "textured_crop", "bob", "pixie", "layered", "curly", "straight"]
          description: "发型类型"
          example: "short"
        hair_color:
          type: string
          enum: ["black", "brown", "blonde", "red", "gray", "white", "auburn", "chestnut"]
          description: "发色"
          example: "black"
    HairstyleEditorResponse:
      type: object
      properties:
        request_id:
          type: string
          description: "请求ID"
          example: "req_123456789"
        log_id:
          type: string
          description: "日志ID"
          example: "log_987654321"
        error_code:
          type: integer
          description: "错误码，0表示成功"
          example: 0
        result:
          type: object
          properties:
            task_id:
              type: string
              description: "异步任务ID，用于查询处理结果"
              example: "task_abcdef123456"
paths:
  /hairstyle-editor-pro:
    post:
      summary: "发型编辑Pro"
      description: "基于稳定扩散模型，智能编辑人像图片中的发型和颜色"
      security:
        - BearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/HairstyleEditorRequest"
            examples:
              basic:
                summary: "基础示例"
                value:
                  image: "data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQ..."
                  hairstyle: "short"
                  hair_color: "black"
              male_hairstyle:
                summary: "男性发型示例"
                value:
                  image: "data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQ..."
                  hairstyle: "pompadour"
                  hair_color: "brown"
              female_hairstyle:
                summary: "女性发型示例"
                value:
                  image: "data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQ..."
                  hairstyle: "bob"
                  hair_color: "blonde"
      responses:
        "200":
          description: "请求成功"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/HairstyleEditorResponse"
              examples:
                success:
                  summary: "成功响应"
                  value:
                    request_id: "req_123456789"
                    log_id: "log_987654321"
                    error_code: 0
                    result:
                      task_id: "task_abcdef123456"
        "400":
          description: "请求参数错误"
          content:
            application/json:
              schema:
                type: object
                properties:
                  error_code:
                    type: integer
                    example: 1001
                  error_detail:
                    type: object
                    properties:
                      message:
                        type: string
                        example: "请求参数无效"
        "401":
          description: "认证失败"
          content:
            application/json:
              schema:
                type: object
                properties:
                  error_code:
                    type: integer
                    example: 2001
                  error_detail:
                    type: object
                    properties:
                      message:
                        type: string
                        example: "API密钥无效或已过期"
        "429":
          description: "请求频率超限"
          content:
            application/json:
              schema:
                type: object
                properties:
                  error_code:
                    type: integer
                    example: 4001
                  error_detail:
                    type: object
                    properties:
                      message:
                        type: string
                        example: "请求过于频繁，请稍后重试"
---

# 发型编辑Pro

基于稳定扩散模型，智能编辑人像图片中的发型和颜色。

<RequestExample>
```bash
curl -X POST https://api.ailabtools.com/v1/hairstyle-editor-pro \
  -H "Authorization: Bearer YOUR_API_KEY" \
  -H "Content-Type: application/json" \
  -d '{
    "image": "data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQ...",
    "hairstyle": "short",
    "hair_color": "black"
  }'
```
</RequestExample>

<ResponseExample>
```json
{
  "request_id": "req_123456789",
  "log_id": "log_987654321",
  "error_code": 0,
  "result": {
    "task_id": "task_abcdef123456"
  }
}
```
</ResponseExample>

## 请求参数

| 参数名 | 类型 | 必需 | 描述 |
|--------|------|------|------|
| `image` | string | 是 | Base64编码的图片数据，支持PNG、JPG、JPEG格式 |
| `hairstyle` | string | 否 | 发型类型，详见下方发型选项 |
| `hair_color` | string | 否 | 发色，详见下方颜色选项 |

### 图片要求

<Warning>
请确保上传的图片符合以下要求，否则可能导致处理失败。
</Warning>

- **图像格式**: `PNG` `JPG` `JPEG`
- **图像大小**: 不超过3MB
- **图像分辨率**: 大于200x200px，小于1999x1999px
- **人脸要求**: 
  - 图片中必须包含一个人脸
  - 人脸占比应大于图片的10%
  - 人脸角度不应超过30度

### 发型选项

#### 男性发型
- `short` - 短发
- `medium` - 中发
- `long` - 长发
- `buzzcut` - 寸头
- `pompadour` - 蓬巴杜发型
- `quiff` - 飞机头
- `slicked_back` - 背头
- `textured_crop` - 纹理短发

#### 女性发型
- `short` - 短发
- `medium` - 中发
- `long` - 长发
- `bob` - 波波头
- `pixie` - 精灵短发
- `layered` - 层次发型
- `curly` - 卷发
- `straight` - 直发

### 颜色选项

- `black` - 黑色
- `brown` - 棕色
- `blonde` - 金色
- `red` - 红色
- `gray` - 灰色
- `white` - 白色
- `auburn` - 红褐色
- `chestnut` - 栗色

## 响应参数

| 字段 | 类型 | 描述 |
|------|------|------|
| `request_id` | string | 请求ID |
| `log_id` | string | 日志ID |
| `error_code` | number | 错误码，0表示成功 |
| `result.task_id` | string | 异步任务ID，用于查询处理结果 |

<Note>
这是一个异步API，返回的task_id需要用于查询最终的处理结果。
</Note>

## 错误码

| 错误码 | 描述 |
|--------|------|
| 0 | 成功 |
| 1001 | 参数错误 |
| 1002 | 图片格式不支持 |
| 1003 | 图片大小超限 |
| 1004 | 图片分辨率不符合要求 |
| 1005 | 未检测到人脸 |
| 1006 | 检测到多个人脸 |
| 1007 | 人脸角度过大 |
| 1008 | 人脸占比过小 |

## 使用示例

<Tabs>
<Tab title="JavaScript">
```javascript
const response = await fetch('https://api.ailabtools.com/v1/hairstyle-editor-pro', {
  method: 'POST',
  headers: {
    'Authorization': 'Bearer YOUR_API_KEY',
    'Content-Type': 'application/json'
  },
  body: JSON.stringify({
    image: 'data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQ...',
    hairstyle: 'short',
    hair_color: 'black'
  })
});

const result = await response.json();
console.log(result.task_id);
```
</Tab>

<Tab title="Python">
```python
import requests

response = requests.post(
    'https://api.ailabtools.com/v1/hairstyle-editor-pro',
    headers={
        'Authorization': 'Bearer YOUR_API_KEY',
        'Content-Type': 'application/json'
    },
    json={
        'image': 'data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQ...',
        'hairstyle': 'short',
        'hair_color': 'black'
    }
)

result = response.json()
print(result['result']['task_id'])
```
</Tab>

<Tab title="cURL">
```bash
curl -X POST https://api.ailabtools.com/v1/hairstyle-editor-pro \
  -H "Authorization: Bearer YOUR_API_KEY" \
  -H "Content-Type: application/json" \
  -d '{
    "image": "data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQ...",
    "hairstyle": "short",
    "hair_color": "black"
  }'
```
</Tab>
</Tabs>
